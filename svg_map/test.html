<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draggable Square on a Line</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        .draggable {
            cursor: grab;
        }
    </style>
</head>
<body>
    <svg width="600" height="100" style="border: 1px solid black;"></svg>

    <script>
        // Create the SVG container
        const svg = d3.select("svg");

        // Define the line coordinates
        const lineX1 = 50, lineX2 = 550, lineY = 50;

        // Append the line to the SVG
        svg.append("line")
            .attr("x1", lineX1)
            .attr("x2", lineX2)
            .attr("y1", lineY)
            .attr("y2", lineY)
            .attr("stroke", "black")
            .attr("stroke-width", 2);

        // Initial square position
        const squareSize = 30;
        let squareX = lineX1;

        // Append the square
        const square = svg.append("rect")
            .attr("x", squareX - squareSize / 2) // Center the square on the line
            .attr("y", lineY - squareSize / 2)  // Center vertically around the line
            .attr("width", squareSize)
            .attr("height", squareSize)
            .attr("fill", "steelblue")
            .attr("class", "draggable");

        // Define drag behavior
        const drag = d3.drag()
            .on("drag", (event) => {
                // Constrain x to the line's range
                let newX = Math.max(lineX1, Math.min(lineX2, event.x));

                // Update square position
                square.attr("x", newX - squareSize / 2);
            });

        // Apply drag behavior to the square
        square.call(drag);
    </script>
</body>
</html>
